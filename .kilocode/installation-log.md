# Installation Log - Full-Stack Project Setup

## Chronological Commands Executed

1. `mkdir frontend backend .kilocode` - Created root directories for frontend, backend, and kilocode folder.

2. `cd backend && npm init -y` - Initialized npm package.json in backend.

3. `cd backend && npm install express @prisma/client cors dotenv && npm install -D typescript @types/node ts-node nodemon prisma` - Installed core dependencies for backend.

4. `cd backend && mkdir -p src/{controllers,services,entities,routes}` - Created backend source folder structure.

5. Manual file creation: `backend/tsconfig.json` - Configured TypeScript compiler options.

6. Manual file creation: `backend/prisma/schema.prisma` - Defined Prisma schema with PostgreSQL datasource and basic User model.

7. Manual file creation: `backend/.env` - Added environment variables template.

8. `cd backend && npx prisma generate` - Generated Prisma client (after ensuring prisma CLI was installed).

9. Manual file creation: `backend/prisma/seed.ts` - Created seed script for sample data.

10. `cd backend && npm install -D @types/express @types/cors` - Installed TypeScript types for Express and CORS.

11. Updated `backend/tsconfig.json` - Added "types": ["node"] and include for prisma scripts.

12. Updated `backend/package.json` - Added npm scripts for dev, build, start, migrate, seed.

13. `rm -rf frontend && npx @angular/cli@latest new frontend --routing --style=css --skip-git --skip-tests --package-manager=npm` - Removed empty frontend dir and created new Angular project (version 20.3.6).

14. Manual file creation: `backend/api.md` - Added API documentation with placeholder endpoints.

## Exact Versions of Installed Dependencies

### Backend (from `npm ls --depth=0` in backend):
- @prisma/client@6.17.1
- cors@2.8.5
- dotenv@17.2.3
- express@5.1.0
- prisma@6.17.1
- typescript@ (inferred from install, latest compatible)
- @types/node@24.8.1
- @types/express@5.0.3
- @types/cors@2.8.19
- ts-node@ (latest)
- nodemon@ (latest)

Note: Some extraneous packages listed due to Prisma internals; core versions as above.

### Frontend (from `npm ls --depth=0` in frontend):
- @angular/animations@20.3.6 (inferred from core)
- @angular/cli@20.3.6
- @angular/common@20.3.6
- @angular/compiler@20.3.6
- @angular/core@20.3.6
- @angular/forms@20.3.6
- @angular/platform-browser@20.3.6
- @angular/platform-browser-dynamic@20.3.6
- @angular/router@20.3.6
- rxjs@7.8.2
- tslib@2.8.1
- zone.js@0.15.1
- typescript@5.9.3

Dev dependencies include @angular-devkit/build-angular@20.3.6, karma, jasmine, etc.

## Created Folder Structure

- **Root**:
  - frontend/ (Angular project)
    - src/
      - app/ (components, modules, etc.)
      - assets/
      - environments/
    - angular.json
    - package.json
    - tsconfig.json
    - ... (standard Angular structure)
  - backend/
    - src/
      - controllers/
      - services/
      - entities/
      - routes/
      - server.ts
    - prisma/
      - schema.prisma
      - seed.ts
    - dist/ (build output)
    - .env
    - tsconfig.json
    - package.json
    - api.md
  - .kilocode/
    - installation-log.md (this file)

## Generated Configuration Files

- **backend/tsconfig.json**: TypeScript config for Node.js/Express with strict mode, ES2020 target, src as rootDir.
- **backend/prisma/schema.prisma**: Prisma schema for PostgreSQL with User model (id, email unique, name optional, timestamps).
- **backend/.env**: Template with DATABASE_URL="postgresql://username:password@localhost:5432/mydb?schema=public".
- **backend/package.json**: NPM scripts (dev: nodemon ts-node src/server.ts, build: tsc, start: node dist/server.js, migrate: prisma migrate dev, seed: ts-node prisma/seed.ts).
- **backend/api.md**: Documentation for endpoints like GET /users, POST /users, auth placeholders.
- **frontend/angular.json**: Standard Angular workspace config (generated by CLI).
- **frontend/tsconfig.json**: Angular TypeScript config (strict, ES2022, etc., generated).
- **frontend/package.json**: Angular dependencies and scripts (ng serve, ng build, etc.).

## Configuration Steps Performed

1. Backend: Initialized npm, installed deps, created folder structure, configured TS, set up Prisma schema and client generation, created basic Express server with CORS for localhost:4200, added sample /users endpoint.
2. Frontend: Generated Angular 20 project with routing and CSS, standard structure ready for development.
3. Database: Prisma configured for PostgreSQL; migration and seed scripts ready (run after DB setup).
4. CORS: Enabled in backend for Angular dev server.
5. API Docs: Placeholder endpoints documented.

## Necessary Environment Variables

- **Backend (.env)**:
  - DATABASE_URL: PostgreSQL connection string (e.g., postgresql://user:pass@localhost:5432/dbname?schema=public). Update with actual DB credentials.
  - PORT (optional): Server port, defaults to 3001.

- **Frontend**: No custom env vars needed initially; use Angular environments/ for API base URL (e.g., http://localhost:3001).

## Instructions to Start the Project

### Prerequisites
- Node.js 20+ installed.
- PostgreSQL installed and running; create database 'mydb' and update .env with credentials.
- npm installed.

### Backend
1. `cd backend`
2. Update .env with real DB credentials.
3. `npm run migrate` - Run Prisma migrations (creates tables).
4. `npm run seed` - Seed sample data (optional).
5. `npm run dev` - Start development server (hot reload with nodemon).
   - Or `npm run build && npm start` for production.

Server runs on http://localhost:3001. Test: curl http://localhost:3001/users

### Frontend
1. `cd frontend`
2. `npm install` - If deps missing (already installed via CLI).
3. `npm start` - Start dev server on http://localhost:4200.
   - Or `npm run build` for production build (dist/ folder).

### Full Stack
- Start backend first, then frontend.
- Frontend can proxy API calls to backend (configure in angular.json if needed).

## Common Troubleshooting and Solutions

1. **Prisma DB Connection Error (P1010)**:
   - Cause: Invalid DATABASE_URL or DB not running.
   - Solution: Ensure PostgreSQL is running, create DB, update .env. Test connection: `npx prisma db push`.

2. **npm install fails or missing deps**:
   - Cause: Network/cache issues.
   - Solution: `rm -rf node_modules package-lock.json && npm install`.

3. **TypeScript Errors in Backend**:
   - Cause: Missing types.
   - Solution: Ensure @types/* installed; run `tsc --noEmit` to check.

4. **Angular Build/Serve Errors**:
   - Cause: Version mismatch or missing global CLI.
   - Solution: Use local `npx ng serve`; update to latest Angular if needed.

5. **CORS Errors**:
   - Cause: Frontend/backend ports mismatch.
   - Solution: Update CORS origin in server.ts to match frontend URL.

6. **Port Already in Use**:
   - Cause: Another process on 3001/4200.
   - Solution: Kill process (`lsof -ti:3001 | xargs kill -9`) or change PORT.

7. **Prisma Generate/Migrate Fails**:
   - Cause: Schema changes without regeneration.
   - Solution: `npx prisma generate` after schema edits; use `--create-only` if DB unavailable.

Project is now fully configured and ready for development. Run migrations/seeds after DB setup.